# 问题一 请使用 js 实现一个堆排序算法。

```js
// 堆排序
// 第一步：构建一个最大堆
// 第二步：从倒数第一个节点开始，依次交换根节点和最后一个节点，交换之后需要维护最大堆的性质
function heapSort(arr) {
  var heapSize = arr.length;
  buildHeap(arr);
  while (heapSize > 1) {
    heapSize--;
    [arr[heapSize], arr[0]] = [arr[0], arr[heapSize]];
    heapify(arr, heapSize, 0);
  }
}

// 构建一个最大堆
// mid：从倒数第二层开始维护最大堆的性质即可，因为最后一层都没有子节点
function buildHeap(arr) {
  var heapSize = arr.length;
  var mid = Math.floor(heapSize / 2);
  var i;
  for (i = mid; i >= 0; i--) {
    heapify(arr, heapSize, i);
  }
}

// 维护最大堆的性质
// index:表示从哪个节点位置开始维护，该节点及该节点的子孙节点都将保持最大堆的性质
// 递归结束条件：没有子节点了，这时三个if都不会执行
function heapify(arr, heapSize, index) {
  var left = 2 * index + 1;
  var right = 2 * index + 2;
  var largest = index;
  if (left < heapSize && arr[left] > arr[largest]) {
    largest = left;
  }
  if (right < heapSize && arr[right] > arr[largest]) {
    largest = right;
  }
  if (largest !== index) {
    [arr[index], arr[largest]] = [arr[largest], arr[index]];
    heapify(arr, heapSize, largest);
  }
}
var arr = [1, 4, 55, 56, 24, 3, 46, 234, 456, 7, 8, 3543];
heapSort(arr);
console.log(arr);
```

